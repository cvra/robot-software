dependency-dir: ../lib

depends:
    - crc
    - serial-datagram:
        fork: Stapelzeiger
    - parameter:
        fork: Stapelzeiger
    - simplerpc
    - pid
    - arm-cortex-tools
    - timestamp
    - msgbus
    - lwip
    - fatfs
    - error
    - goap

target.arm:
    - src/main.c
    - src/debug/panic_log.c
    - src/debug/log.c
    - src/debug/blocking_uart.c
    - src/lwip_bindings/lwipthread.c
    - src/lwip_bindings/arch/sys_arch.c
    - src/commands.c
    - src/comm/rpc_server.c
    - src/comm/rpc_callbacks.c
    - src/comm/msg_callbacks.c
    - src/comm/stream.c
    - src/config.c
    - src/can/uavcan_node.cpp
    - src/can/hand_driver.cpp
    - src/can/motor_driver.c
    - src/can/motor_driver_uavcan.cpp
    - src/can/motor_manager.c
    - src/can/motor_feedback_streams_handler.cpp
    - src/can/beacon_signal_handler.cpp
    - src/can/emergency_stop_handler.cpp
    - src/malloc_lock.c
    - src/usbconf.c
    - src/aversive_port/cvra_motors.c
    - src/aversive_port/cvra_pid.c
    - src/base/encoder.c
    - src/base/base_controller.c
    - src/arms/cvra_arm_motors.c
    - src/arms/scara_port.c
    - src/arms/arms_controller.c
    - src/robot_helpers/motor_helpers.c
    - src/config_msgpack.c
    - src/trace/trace_points.c
    - src/strategy.cpp
    - src/filesystem.c
    - src/http/server.c
    - src/control_panel.c

source:
    - src/unix_timestamp.c
    - src/can/bus_enumerator.c
    - src/trace/trace.c
    - src/base/map.c
    - src/robot_helpers/math_helpers.c
    - src/robot_helpers/beacon_helpers.c
    - src/robot_helpers/trajectory_helpers.c
    - src/robot_helpers/strategy_helpers.c
    - src/aversive/blocking_detection_manager/blocking_detection_manager.c
    - src/aversive/obstacle_avoidance/obstacle_avoidance.c
    - src/aversive/math/geometry/circles.c
    - src/aversive/math/geometry/lines.c
    - src/aversive/math/geometry/polygon.c
    - src/aversive/math/geometry/vect_base.c
    - src/aversive/math/vect2/vect2.c
    - src/aversive/robot_system/angle_distance.c
    - src/aversive/robot_system/robot_system.c
    - src/aversive/quadramp/quadramp.c
    - src/aversive/control_system_manager/control_system_manager.c
    - src/aversive/position_manager/position_manager.c
    - src/aversive/trajectory_manager/trajectory_manager.c
    - src/aversive/trajectory_manager/trajectory_manager_core.c
    - src/aversive/trajectory_manager/trajectory_manager_utils.c
    - src/scara/lie_groups.c
    - src/scara/joint.c
    - src/scara/scara_hardware_interface.c
    - src/scara/scara_utils.c
    - src/scara/scara_trajectories.c
    - src/scara/scara_kinematics.c
    - src/scara/scara.c
    - src/scara/scara_jacobian.cpp
    - src/scara/control/scara_joint_controller.c
    - src/scara/control/scara_inverse_kinematics_controller.c
    - src/hand/hand.c

include_directories:
    - src/
    - src/lwip_bindings
    - src/aversive/
    - src/board/
    - src/debug/
    - src/can/
    - src/comm/
    - ../lib/eigen/

tests:
    - tests/ch.cpp
    - tests/unix-timestamp.cpp
    - tests/bus_enumerator.cpp
    - tests/test_map.cpp
    - tests/test_math_helpers.cpp
    - tests/test_beacon_helpers.cpp
    - tests/test_trajectory_helpers.cpp
    - tests/test_strategy_helpers.cpp
    - tests/obstacle_avoidance.cpp
    - tests/trace_test.cpp
    - tests/trace_points.c
    - tests/trajectory_manager_test.cpp
    - tests/scara_port_mock.cpp
    - tests/scara_utils.cpp
    - tests/scara_trajectories.cpp
    - tests/scara_kinematics.cpp
    - tests/scara_kinematics_integration.cpp
    - tests/scara_hardware_interface.cpp
    - tests/scara_joint_controller.cpp
    - tests/scara_inverse_kinematics_controller.cpp
    - tests/scara.cpp
    - tests/test_hand.cpp
    - tests/lie_groups.cpp

templates:
    app_src.mk.jinja: app_src.mk
    CMakeLists.txt.jinja: CMakeLists.txt
