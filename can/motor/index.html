<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Motor board - CVRA Robot Software</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="generator" content="mkdocs-1.2.3, mkdocs-gitbook-1.0.7">

<link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../../css/style.min.css" rel="stylesheet">
<link href="../../ytvideo.css" rel="stylesheet">
<link href="../../styles.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">

<nav role="navigation">
<ul class="summary">
<li>
<a href="../.." target="_blank" class="custom-link">CVRA Robot Software</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="">
<a href="../..">Home</a>
<li class="header">Robot architecture</li>

<li>
<a href="../../architecture/history/" class="">History & Design</a>
</li>

<li>
<a href="../../architecture/hardware2020/" class="">2020 hardware architecture</a>
</li>

<li>
<a href="../../architecture/life-of-a-motion/" class="">Life of a motion</a>
</li>

<li>
<a href="../../design/linux-master/" class="">Master firmware on Linux</a>
</li>

<li class="header">How to</li>

<li>
<a href="../../howto/calibrate-odometry/" class="">Calibrate the odometry</a>
</li>

<li>
<a href="../../howto/add_a_uavcan_message/" class="">Handle new UAVCAN data types</a>
</li>

<li>
<a href="../../howto/install_arm_gcc/" class="">Install the ARM compiler</a>
</li>

<li class="header">Systems</li>

<li>
<a href="../positioning/" class="">Positioning system</a>
</li>

<li class="header">CAN</li>

<li>
<a href="../intro/" class="">CAN Ecosystem</a>
</li>

<li>
<a href="./" class="active">Motor board</a>
</li>

<li>
<a href="../io/" class="">IO board</a>
</li>

<li>
<a href="../sensor/" class="">Sensor board</a>
</li>

<li>
<a href="../beacon/" class="">Beacon board</a>
</li>

<li>
<a href="../adapter/" class="">CAN USB adapter</a>
</li>

<li>
<a href="../bootloader/" class="">CAN bootloader</a>
</li>

<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">

<section class="normal markdown-section">



<h1 id="motor-board">Motor board</h1>
<p>The Motor board is a small board (31x16mm) with a dedicated STM32F3 microcontroller that is at the core of all our robots since 2015.
We have been using it to control DC motors, motor pumps, and RC servos.
Here are its main features:</p>
<ul>
<li>CAN interface with communication over UAVCAN for parameter/gain setting, setpoint sending, and feedback streaming.</li>
<li>CAN bootloader for easy firmware update over the bus.</li>
<li>Control a single DC motor with current sensing, allowing cascaded PID control (torque, velocity, and position).</li>
<li>H-bridge to drive the motor bidirectionally that supports driving a motor with up to 16.8V @ 6.6A continuously.</li>
<li>Quadrature encoder interface for motor (5V tolerant).</li>
<li>Secondary quadrature encoder interface (5V tolerant) (eg. for separate odometry wheels).</li>
<li>Analog input for RC-servo control.</li>
<li>Digital input for indexing, allows us to determine a reference location on a given axis that can be used for absolute positioning.</li>
<li>Runs on 3 or 4 cell LiPo/LiFe batteries.</li>
<li>SWD connector for flashing and debugging, with UART exposed on the same connector.</li>
<li>Costs &lt; 35 USD in components.</li>
</ul>
<p><img alt="Motor boards on the SCARA arm version of 2016 used to control motor pumps" src="../images/motor-board.jpg" /></p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://github.com/cvra/motor-control-board">Hardware</a> including KiCad files, the schematics in PDF, and gerber files.</li>
<li><a href="https://github.com/cvra/robot-software/tree/master/motor-control-firmware">Software</a> using ChibiOS RTOS/HAL, and UAVCAN for communication.</li>
<li><a href="https://github.com/cvra/can-bootloader">Bootloader</a> based on libOpenCM3 and a custom lightweight protocol.</li>
</ul>


</section>

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../../js/main.js"></script>
<script src="../../js/gitbook.min.js"></script>
<script src="../../js/theme.min.js"></script>
</body>
</html>